<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Greenhouse Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>Greenhouse Dashboard</h1>
  <button onclick="loadLatest()">Cargar Ãºltimos</button>
  <canvas id="chart" width="800" height="300"></canvas>
  <script>
    async function loadLatest(){
      const res = await fetch('/api/sensors/latest?limit=50');
      const data = await res.json();
      const temps = data.map(d => d.values.temperature || d.values.temp || null);
      const labels = data.map(d => new Date(d.server_ts).toLocaleTimeString());
      const ctx = document.getElementById('chart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels,
          datasets: [{label:'temp', data:temps, fill:false}]
        }
      })
    }
  </script>
</body>
</html>